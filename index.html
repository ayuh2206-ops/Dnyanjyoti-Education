<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>MPSC/UPSC Coaching Pune | Free Webinar by Dnyanjyoti Education</title>
    <meta name="description" content="Join the best MPSC & UPSC coaching in Pune. Attend Dr. Vishal Bhedurkar's FREE webinar on the new descriptive pattern, syllabus, and strategy. 1 Lakh+ students guided. Register now!">
    <meta name="keywords" content="MPSC coaching Pune, UPSC classes Pune, MPSC syllabus 2025, UPSC preparation strategy, Civil Services Exam guidance, Dr. Vishal Bhedurkar, Dnyanjyoti Education, competitive exam webinar">
    <meta name="author" content="Dnyanjyoti Education">
    <meta name="robots" content="index, follow">

    <!-- Open Graph for Social Sharing -->
    <meta property="og:title" content="Unlock MPSC/UPSC Success | Free Webinar">
    <meta property="og:description" content="Master the new descriptive pattern with Dr. Vishal Bhedurkar. Register for the free webinar today!">
    <meta property="og:image" content="https://www.dnyanjyoti.com/wp-content/uploads/2025/04/MD-Photo.jpg">
    <meta property="og:url" content="https://dnyanjyoti-education.vercel.app/">
    <meta property="og:type" content="website">

    <!-- 1. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { primary: '#002244', accent: '#EA580C', bgBody: '#F8FAFC' },
                    animation: { 'fade-in': 'fadeIn 0.5s ease-out' },
                    keyframes: { fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } } }
                }
            }
        }
    </script>

    <!-- 2. Import Map -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.300.0",
            "firebase/app": "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js",
            "firebase/firestore": "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"
        }
    }
    </script>

    <!-- 3. Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: sans-serif; }
        .spinner { border: 4px solid rgba(0, 0, 0, 0.1); width: 36px; height: 36px; border-radius: 50%; border-left-color: #EA580C; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-bgBody text-slate-900">

    <!-- Error Container -->
    <div id="error-container" style="display:none; padding: 20px; background: #fee2e2; color: #b91c1c; margin: 20px; border-radius: 8px; border: 1px solid #f87171;">
        <h3 style="font-weight: bold; margin-bottom: 8px;">Application Failed to Load</h3>
        <p id="error-message">Unknown Error</p>
        <p style="font-size: 0.8em; margin-top: 8px;">Tip: Ensure <code>firebase-config.js</code> is in the same folder and you are running this on a local server (http://localhost), not by double-clicking the file.</p>
    </div>

    <!-- App Root -->
    <div id="root">
        <div class="h-screen flex items-center justify-center flex-col gap-4">
            <div class="spinner"></div>
            <p class="text-slate-500 text-sm">Loading Application...</p>
        </div>
    </div>

    <!-- 4. Main Script -->
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            CheckCircle, Play, Pause, MessageCircle, Send, ChevronRight, 
            BookOpen, Clock, Award, Download, ShieldCheck, Settings, 
            Lock, Unlock, Video, X, Star, Zap, Target, Book, Brain, Scale, FileText,
            Eye, EyeOff, RotateCcw, Instagram, Facebook, Users, ArrowLeft, Trash2, Edit2
        } from 'lucide-react';

        // Safe Database Import
        let db = null;
        let firestoreFuncs = {};

        async function initApp() {
            try {
                // Try to import the config. If it fails, catch block will run.
                const firebaseConfig = await import('./firebase-config.js');
                db = firebaseConfig.db;
                const fs = await import('firebase/firestore');
                firestoreFuncs = { ...fs };
                
                // If db is undefined (e.g., config file empty or export missing), throw error
                if (!db) throw new Error("Database object is undefined from config file.");

                renderReactApp(false);
            } catch (err) {
                console.error("Firebase Load Error:", err);
                console.warn("Running in Offline/Demo Mode. Database features will be disabled.");
                renderReactApp(true);
            }
        }

        const DEFAULT_SETTINGS = {
            theme: { primary: '#002244', accent: '#EA580C', background: '#F8FAFC' },
            videoConfig: { type: 'none', src: '', title: 'Message from Dr. Vishal' },
            socialLinks: { whatsapp: '#', telegram: '#', instagram: '#', facebook: '#' },
            adminPasskey: 'admin123' // Default passkey
        };

        const CustomVideoPlayer = ({ videoSource }) => {
            const videoRef = useRef(null);
            const [isPlaying, setIsPlaying] = useState(false);
            const [showControls, setShowControls] = useState(true);

            const togglePlay = () => {
                if (videoRef.current) {
                    isPlaying ? videoRef.current.pause() : videoRef.current.play();
                    setIsPlaying(!isPlaying);
                }
            };

            return (
                <div 
                    className="relative w-full h-full group bg-black rounded-2xl overflow-hidden shadow-2xl border-4 border-white ring-1 ring-slate-200"
                    onMouseEnter={() => setShowControls(true)}
                    onMouseLeave={() => isPlaying && setShowControls(false)}
                >
                    {!videoSource.src ? (
                        <div className="absolute inset-0 flex flex-col items-center justify-center bg-slate-900 text-slate-500 h-64 md:h-full">
                           <Video size={48} className="mb-4 opacity-50" />
                           <p>No Video Configured</p>
                        </div>
                    ) : (
                        <video 
                            ref={videoRef}
                            src={videoSource.src}
                            className="w-full h-full object-cover"
                            onClick={togglePlay}
                            onEnded={() => setIsPlaying(false)}
                            playsInline
                        />
                    )}
                    
                    {showControls && videoSource.src && (
                        <div className="absolute inset-0 bg-black/40 flex flex-col justify-between p-6 transition-opacity duration-300">
                            <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                                <button onClick={togglePlay} className="w-20 h-20 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center pointer-events-auto hover:scale-110 transition-transform">
                                    {isPlaying ? <Pause className="fill-white text-white" /> : <Play className="fill-white text-white ml-1" />}
                                </button>
                            </div>
                            <div className="mt-auto pointer-events-none">
                               <p className="text-white font-bold text-lg drop-shadow-md">{videoSource.title}</p>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const App = ({ isOffline }) => {
            const [currentPage, setCurrentPage] = useState('landing');
            const [isAdmin, setIsAdmin] = useState(false);
            
            // Login Modal States
            const [showLoginModal, setShowLoginModal] = useState(false);
            const [loginPasskey, setLoginPasskey] = useState('');
            const [isSettingNewPasskey, setIsSettingNewPasskey] = useState(false);
            const [showPassword, setShowPassword] = useState(false);
            
            const [adminPanelOpen, setAdminPanelOpen] = useState(false);
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [settings, setSettings] = useState(DEFAULT_SETTINGS);
            const [dbPasskey, setDbPasskey] = useState(null); 

            // Leads Data
            const [leads, setLeads] = useState([]);
            const [isLoadingLeads, setIsLoadingLeads] = useState(false);
            const [editingLead, setEditingLead] = useState(null);

            useEffect(() => {
                if (isOffline || !db) return;
                try {
                    const unsubscribe = firestoreFuncs.onSnapshot(firestoreFuncs.doc(db, "settings", "global"), (docSnap) => {
                        if (docSnap.exists()) {
                            const data = docSnap.data();
                            setDbPasskey(data.adminPasskey || null);
                            setSettings(prev => ({
                                ...prev,
                                theme: data.theme || prev.theme,
                                videoConfig: data.videoConfig || prev.videoConfig,
                                socialLinks: { ...prev.socialLinks, ...data.socialLinks }
                            }));
                        } else {
                            setDbPasskey(null);
                        }
                    });
                    return () => unsubscribe();
                } catch (e) { console.warn("Live sync failed", e); }
            }, [isOffline]);

            const fetchLeads = async () => {
                if (isOffline) return;
                setIsLoadingLeads(true);
                try {
                    let q;
                    try {
                        q = firestoreFuncs.query(
                            firestoreFuncs.collection(db, "leads"), 
                            firestoreFuncs.orderBy("registeredAt", "desc")
                        );
                    } catch(e) {
                        q = firestoreFuncs.collection(db, "leads");
                    }
                    
                    const querySnapshot = await firestoreFuncs.getDocs(q);
                    const leadsData = querySnapshot.docs.map(doc => ({
                        id: doc.id,
                        ...doc.data()
                    }));
                    setLeads(leadsData);
                } catch (e) {
                    console.error(e);
                    alert("Error fetching leads. Make sure Firestore rules allow reads!");
                } finally {
                    setIsLoadingLeads(false);
                }
            };

            const handleDeleteLead = async (id) => {
                if (!confirm("Are you sure you want to delete this registration?")) return;
                try {
                    await firestoreFuncs.deleteDoc(firestoreFuncs.doc(db, "leads", id));
                    setLeads(leads.filter(l => l.id !== id));
                } catch(e) { alert("Error deleting: " + e.message); }
            };

            const handleEditLead = async (lead) => {
                const newName = prompt("Edit Name:", lead.name);
                if (newName === null) return;
                const newEmail = prompt("Edit Email:", lead.email);
                if (newEmail === null) return;
                const newPhone = prompt("Edit Phone:", lead.phone);
                if (newPhone === null) return;

                try {
                    await firestoreFuncs.updateDoc(firestoreFuncs.doc(db, "leads", lead.id), {
                        name: newName, email: newEmail, phone: newPhone
                    });
                    setLeads(leads.map(l => l.id === lead.id ? {...l, name: newName, email: newEmail, phone: newPhone} : l));
                } catch(e) { alert("Error updating: " + e.message); }
            };

            const handleAdminLoginClick = () => {
                if (isAdmin) {
                    setAdminPanelOpen(!adminPanelOpen);
                } else {
                    setShowLoginModal(true);
                    setLoginPasskey('');
                    setIsSettingNewPasskey(!dbPasskey); 
                }
            };

            const submitLogin = async () => {
                if (!loginPasskey.trim()) return alert("Please enter a passkey.");

                if (isSettingNewPasskey) {
                    if (isOffline) return alert("Cannot set passkey offline.");
                    try {
                        await firestoreFuncs.setDoc(firestoreFuncs.doc(db, "settings", "global"), { adminPasskey: loginPasskey.trim() }, { merge: true });
                        alert("Passkey set successfully! You are now logged in.");
                        setIsAdmin(true);
                        setAdminPanelOpen(true);
                        setShowLoginModal(false);
                    } catch (e) {
                        alert("Error saving passkey: " + e.message);
                    }
                } else {
                    if (loginPasskey === dbPasskey) {
                        setIsAdmin(true);
                        setAdminPanelOpen(true);
                        setShowLoginModal(false);
                    } else {
                        alert("Incorrect Passkey!");
                    }
                }
            };

            const saveSettings = async (newSettings) => {
                if (isOffline) return alert("Offline Mode: Changes won't save.");
                try {
                    setSettings(newSettings);
                    await firestoreFuncs.setDoc(firestoreFuncs.doc(db, "settings", "global"), newSettings, { merge: true });
                } catch (err) { alert("Error: " + err.message); }
            };

            const resetSettings = async () => {
                if(!confirm("Are you sure you want to reset all settings to default?")) return;
                if (isOffline) return alert("Offline Mode: Cannot reset.");
                
                try {
                    const resetData = {
                        ...DEFAULT_SETTINGS,
                        adminPasskey: dbPasskey 
                    };
                    setSettings(DEFAULT_SETTINGS);
                    await firestoreFuncs.setDoc(firestoreFuncs.doc(db, "settings", "global"), resetData, { merge: true });
                    alert("Settings have been reset to defaults.");
                } catch (err) { alert("Error resetting: " + err.message); }
            }

            const handleRegister = async (e) => {
                e.preventDefault();
                setIsSubmitting(true);
                
                if (isOffline) {
                    setTimeout(() => {
                        setCurrentPage('thankyou');
                        window.scrollTo(0,0);
                        setIsSubmitting(false);
                    }, 1000);
                    return;
                }

                const formData = new FormData(e.currentTarget);
                const leadData = {
                    name: formData.get('fullName'),
                    email: formData.get('email'),
                    phone: formData.get('phone'),
                    registeredAt: new Date().toISOString(),
                    source: 'web_v1'
                };

                try {
                    await firestoreFuncs.addDoc(firestoreFuncs.collection(db, "leads"), leadData);
                    setTimeout(() => {
                        setCurrentPage('thankyou');
                        window.scrollTo(0,0);
                        setIsSubmitting(false);
                    }, 500);
                } catch (error) {
                    alert("Registration failed. Check console.");
                    setIsSubmitting(false);
                }
            };

            return (
                <div style={{ '--primary': settings.theme.primary, '--accent': settings.theme.accent }} className="animate-fade-in font-sans">
                    
                    {/* Admin Toggle */}
                    <div className="fixed bottom-6 right-6 z-50 flex flex-col items-end">
                        <button 
                            onClick={handleAdminLoginClick}
                            className={`p-3 rounded-full shadow-xl border transition-all ${isAdmin ? 'bg-slate-900 text-white' : 'bg-white text-slate-400 hover:text-[var(--accent)]'}`}
                        >
                            {isAdmin ? <Settings size={24} /> : <Lock size={20} />}
                        </button>

                        {/* Login/Set Passkey Modal */}
                        {showLoginModal && (
                            <div className="absolute bottom-16 right-0 bg-white p-4 rounded-2xl shadow-2xl border border-slate-200 w-72 mb-2 animate-fade-in z-50">
                                <div className="flex justify-between items-center mb-3">
                                    <h3 className="font-bold text-sm text-slate-800">
                                        {isSettingNewPasskey ? "Set New Passkey" : "Admin Login"}
                                    </h3>
                                    <button onClick={() => setShowLoginModal(false)} className="text-slate-400 hover:text-red-500"><X size={16}/></button>
                                </div>
                                <p className="text-xs text-slate-500 mb-3">
                                    {isSettingNewPasskey ? "First time setup: Create a secure passkey to protect admin settings." : "Enter your passkey to unlock."}
                                </p>
                                <div className="relative mb-3">
                                    <input 
                                        type={showPassword ? "text" : "password"} 
                                        value={loginPasskey}
                                        onChange={(e) => setLoginPasskey(e.target.value)}
                                        className="w-full text-sm p-2 border rounded focus:border-[var(--accent)] outline-none pr-8"
                                        placeholder="Passkey"
                                    />
                                    <button 
                                        onClick={() => setShowPassword(!showPassword)}
                                        className="absolute right-2 top-2.5 text-slate-400 hover:text-slate-600"
                                    >
                                        {showPassword ? <EyeOff size={14}/> : <Eye size={14}/>}
                                    </button>
                                </div>
                                <button 
                                    onClick={submitLogin}
                                    className="w-full bg-[var(--primary)] text-white py-2 rounded text-sm font-bold hover:brightness-110"
                                >
                                    {isSettingNewPasskey ? "Save & Login" : "Unlock"}
                                </button>
                            </div>
                        )}

                        {/* Admin Panel */}
                        {isAdmin && adminPanelOpen && (
                            <div className="absolute bottom-16 right-0 bg-white p-0 rounded-2xl shadow-2xl border border-slate-200 w-80 overflow-hidden mb-2 animate-fade-in">
                                <div className="bg-slate-900 p-4 flex justify-between items-center text-white">
                                    <h3 className="font-bold flex items-center gap-2 text-sm"><ShieldCheck size={16} /> Admin Panel</h3>
                                    <button onClick={() => { setIsAdmin(false); setAdminPanelOpen(false); }} className="text-xs text-slate-400 hover:text-white flex items-center gap-1"><Unlock size={12} /> Logout</button>
                                </div>
                                <div className="p-4 space-y-4 max-h-[60vh] overflow-y-auto">
                                    {isOffline && <p className="text-red-500 text-xs font-bold">OFFLINE MODE: Cannot Save</p>}
                                    
                                    <div className="flex justify-between items-center pb-2 border-b border-slate-100">
                                        <span className="text-xs font-bold text-slate-400 uppercase">Site Settings</span>
                                        <button 
                                            onClick={resetSettings}
                                            className="flex items-center gap-1 text-[10px] bg-red-50 text-red-600 px-2 py-1 rounded hover:bg-red-100 transition-colors"
                                        >
                                            <RotateCcw size={10} /> Reset
                                        </button>
                                    </div>

                                    {/* Link to Leads Dashboard */}
                                    <button 
                                        onClick={() => { setCurrentPage('admin-dashboard'); fetchLeads(); setAdminPanelOpen(false); }}
                                        className="w-full bg-[var(--primary)] text-white py-3 rounded-xl flex items-center justify-center gap-2 font-bold text-sm shadow-md hover:brightness-110 mb-4 mt-2"
                                    >
                                        <Users size={16} /> Manage Student Leads
                                    </button>

                                    <div>
                                        <label className="text-xs font-bold text-slate-400 uppercase">Primary Color</label>
                                        <div className="flex items-center gap-2 mt-1">
                                            <input type="color" value={settings.theme.primary} onChange={(e) => saveSettings({ ...settings, theme: { ...settings.theme, primary: e.target.value } })} className="h-8 w-8 rounded cursor-pointer border-none" />
                                            <span className="text-xs bg-slate-100 px-2 py-1 rounded">{settings.theme.primary}</span>
                                        </div>
                                    </div>
                                    <div>
                                        <label className="text-xs font-bold text-slate-400 uppercase">Accent Color</label>
                                        <div className="flex items-center gap-2 mt-1">
                                            <input type="color" value={settings.theme.accent} onChange={(e) => saveSettings({ ...settings, theme: { ...settings.theme, accent: e.target.value } })} className="h-8 w-8 rounded cursor-pointer border-none" />
                                            <span className="text-xs bg-slate-100 px-2 py-1 rounded">{settings.theme.accent}</span>
                                        </div>
                                    </div>
                                    <div>
                                        <label className="text-xs font-bold text-slate-400 uppercase">WhatsApp Link</label>
                                        <input type="text" value={settings.socialLinks.whatsapp} onChange={(e) => saveSettings({ ...settings, socialLinks: { ...settings.socialLinks, whatsapp: e.target.value } })} className="w-full text-xs p-2 border rounded mt-1 outline-none focus:border-blue-500" placeholder="https://..." />
                                    </div>
                                    <div>
                                        <label className="text-xs font-bold text-slate-400 uppercase">Telegram Link</label>
                                        <input type="text" value={settings.socialLinks.telegram} onChange={(e) => saveSettings({ ...settings, socialLinks: { ...settings.socialLinks, telegram: e.target.value } })} className="w-full text-xs p-2 border rounded mt-1 outline-none focus:border-blue-500" placeholder="https://..." />
                                    </div>
                                    <div>
                                        <label className="text-xs font-bold text-slate-400 uppercase">Instagram Link</label>
                                        <input type="text" value={settings.socialLinks.instagram} onChange={(e) => saveSettings({ ...settings, socialLinks: { ...settings.socialLinks, instagram: e.target.value } })} className="w-full text-xs p-2 border rounded mt-1 outline-none focus:border-blue-500" placeholder="https://..." />
                                    </div>
                                    <div>
                                        <label className="text-xs font-bold text-slate-400 uppercase">Facebook Link</label>
                                        <input type="text" value={settings.socialLinks.facebook} onChange={(e) => saveSettings({ ...settings, socialLinks: { ...settings.socialLinks, facebook: e.target.value } })} className="w-full text-xs p-2 border rounded mt-1 outline-none focus:border-blue-500" placeholder="https://..." />
                                    </div>
                                    <div>
                                        <label className="text-xs font-bold text-slate-400 uppercase">Video URL</label>
                                        <input type="text" value={settings.videoConfig.src} onChange={(e) => saveSettings({ ...settings, videoConfig: { ...settings.videoConfig, src: e.target.value, type: 'url' } })} className="w-full text-xs p-2 border rounded mt-1 outline-none focus:border-blue-500" placeholder="https://..." />
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>

                    {/* --- ROUTING LOGIC --- */}
                    {currentPage === 'admin-dashboard' ? (
                        <div className="min-h-screen bg-slate-50 p-4 md:p-8">
                            <div className="max-w-6xl mx-auto">
                                <div className="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
                                    <div>
                                        <h1 className="text-2xl font-bold text-[var(--primary)] flex items-center gap-2">
                                            <Users className="text-[var(--accent)]" /> Student Registrations
                                        </h1>
                                        <p className="text-slate-500">Manage all webinar leads here.</p>
                                    </div>
                                    <div className="flex gap-4">
                                        <div className="bg-white px-4 py-2 rounded-lg shadow-sm border border-slate-200">
                                            <span className="block text-xs text-slate-400 font-bold uppercase">Total Leads</span>
                                            <span className="text-xl font-bold text-[var(--primary)]">{leads.length}</span>
                                        </div>
                                        <button 
                                            onClick={() => setCurrentPage('landing')} 
                                            className="px-4 py-2 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 text-slate-700 font-medium flex items-center gap-2"
                                        >
                                            <ArrowLeft size={16} /> Back to Site
                                        </button>
                                    </div>
                                </div>

                                <div className="bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden">
                                    {isLoadingLeads ? (
                                        <div className="p-12 text-center text-slate-500">Loading leads...</div>
                                    ) : (
                                        <div className="overflow-x-auto">
                                            <table className="w-full text-left border-collapse">
                                                <thead>
                                                    <tr className="bg-slate-100 border-b border-slate-200">
                                                        <th className="p-4 font-semibold text-slate-600 text-sm">Name</th>
                                                        <th className="p-4 font-semibold text-slate-600 text-sm">Contact Details</th>
                                                        <th className="p-4 font-semibold text-slate-600 text-sm">Date</th>
                                                        <th className="p-4 font-semibold text-slate-600 text-sm text-right">Actions</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {leads.map((lead) => (
                                                        <tr key={lead.id} className="border-b border-slate-100 hover:bg-slate-50 transition-colors">
                                                            <td className="p-4 font-medium text-slate-800">{lead.name}</td>
                                                            <td className="p-4 text-sm text-slate-600">
                                                                <div className="flex flex-col">
                                                                    <span>{lead.email}</span>
                                                                    <span className="text-xs text-slate-400">{lead.phone}</span>
                                                                </div>
                                                            </td>
                                                            <td className="p-4 text-sm text-slate-500">
                                                                {new Date(lead.registeredAt).toLocaleDateString()}
                                                            </td>
                                                            <td className="p-4 text-right">
                                                                <div className="flex items-center justify-end gap-2">
                                                                    <button 
                                                                        onClick={() => handleEditLead(lead)} 
                                                                        className="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors" 
                                                                        title="Edit"
                                                                    >
                                                                        <Edit2 size={16} />
                                                                    </button>
                                                                    <button 
                                                                        onClick={() => handleDeleteLead(lead.id)} 
                                                                        className="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors" 
                                                                        title="Delete"
                                                                    >
                                                                        <Trash2 size={16} />
                                                                    </button>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    ))}
                                                    {leads.length === 0 && (
                                                        <tr>
                                                            <td colSpan="4" className="p-8 text-center text-slate-400">No registrations found.</td>
                                                        </tr>
                                                    )}
                                                </tbody>
                                            </table>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    ) : currentPage === 'thankyou' ? (
                        <div className="min-h-screen py-12 px-6 flex flex-col items-center justify-center bg-[var(--primary)] text-white relative overflow-hidden animate-fade-in">
                            {/* Decorative BG */}
                            <div className="absolute top-[-10%] right-[-5%] w-[500px] h-[500px] bg-white/5 rounded-full blur-[100px] pointer-events-none"></div>
                            
                            <div className="max-w-4xl w-full bg-white text-slate-900 rounded-3xl shadow-2xl overflow-hidden relative z-10">
                                {/* Header */}
                                <div className="bg-[var(--primary)] p-10 text-center relative overflow-hidden">
                                    <div className="absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"></div>
                                    <div className="w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl ring-4 ring-green-400/30 animate-bounce">
                                        <CheckCircle className="text-white" size={48} />
                                    </div>
                                    <h1 className="text-3xl md:text-4xl font-extrabold text-white mb-2">Registration Successful!</h1>
                                    <p className="text-blue-100 text-lg">Your seat for the webinar has been reserved.</p>
                                </div>

                                <div className="p-8 md:p-12">
                                    <div className="grid md:grid-cols-2 gap-12">
                                        {/* Left: Video */}
                                        <div className="flex flex-col justify-center">
                                            <h3 className="font-bold text-xl text-[var(--primary)] mb-4 flex items-center gap-2">
                                                <Video size={20} className="text-[var(--accent)]"/> Watch this first
                                            </h3>
                                            <div className="aspect-video rounded-2xl overflow-hidden shadow-lg border border-slate-200">
                                                <CustomVideoPlayer videoSource={settings.videoConfig} />
                                            </div>
                                        </div>

                                        {/* Right: Steps */}
                                        <div className="flex flex-col justify-center">
                                            <h3 className="font-bold text-xl text-[var(--primary)] mb-6">Next Steps:</h3>
                                            <div className="space-y-6">
                                                <div className="flex gap-4">
                                                    <div className="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold shrink-0">1</div>
                                                    <div>
                                                        <p className="font-medium text-slate-800">Join the WhatsApp Group</p>
                                                        <p className="text-sm text-slate-500 mb-3">Get the meeting link 15 mins before start.</p>
                                                        <a href={settings.socialLinks.whatsapp} target="_blank" className="inline-flex items-center gap-2 bg-[#25D366] text-white px-4 py-2 rounded-lg font-bold hover:brightness-110 transition-all shadow-md shadow-green-200">
                                                            <MessageCircle size={18} /> Join Group
                                                        </a>
                                                    </div>
                                                </div>
                                                <div className="flex gap-4">
                                                    <div className="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold shrink-0">2</div>
                                                    <div>
                                                        <p className="font-medium text-slate-800">Follow us for Updates</p>
                                                        <p className="text-sm text-slate-500 mb-3">Daily study tips and current affairs.</p>
                                                        <div className="flex gap-2">
                                                            <a href={settings.socialLinks.instagram} target="_blank" className="p-2 bg-gradient-to-r from-[#833ab4] via-[#fd1d1d] to-[#fcb045] text-white rounded-lg hover:opacity-90 transition-all shadow-sm">
                                                                <Instagram size={20} />
                                                            </a>
                                                            <a href={settings.socialLinks.facebook} target="_blank" className="p-2 bg-[#1877F2] text-white rounded-lg hover:brightness-110 transition-all shadow-sm">
                                                                <Facebook size={20} />
                                                            </a>
                                                            <a href={settings.socialLinks.telegram} target="_blank" className="p-2 bg-[#0088cc] text-white rounded-lg hover:brightness-110 transition-all shadow-sm">
                                                                <Send size={20} />
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    ) : (
                        <div>
                            {/* HERO */}
                            <section className="relative pt-24 pb-32 px-6 md:px-12 bg-[var(--primary)] text-white overflow-hidden transition-colors duration-500">
                                <div className="absolute top-[-10%] right-[-5%] w-[500px] h-[500px] bg-blue-500/10 rounded-full blur-[100px] pointer-events-none"></div>
                                <div className="max-w-5xl mx-auto text-center relative z-10">
                                    <div className="flex justify-center mb-8">
                                        <div className="inline-flex items-center px-4 py-1.5 rounded-full bg-slate-900/50 border border-[var(--accent)]/30 shadow-lg backdrop-blur-sm">
                                            <span className="text-[var(--accent)] font-extrabold uppercase tracking-widest text-xs sm:text-sm animate-pulse">Exclusive Webinar Event</span>
                                        </div>
                                    </div>
                                    <h1 className="text-4xl md:text-6xl lg:text-7xl font-extrabold tracking-tight mb-8 leading-[1.1]">
                                        Conquer the Fear of the <br className="hidden md:block" />
                                        <span className="text-transparent bg-clip-text bg-gradient-to-r from-[var(--accent)] to-orange-400">New Descriptive Pattern</span>
                                    </h1>
                                    <p className="text-lg md:text-2xl text-slate-300 mb-12 max-w-3xl mx-auto font-light leading-relaxed">
                                        Master the exact <span className="text-white font-semibold border-b border-[var(--accent)]">Framework Method</span> used by 350+ Officers to crack MPSC/UPSC.
                                    </p>
                                    <div className="flex flex-col sm:flex-row gap-5 justify-center items-center">
                                        <button onClick={() => document.getElementById('reg-form')?.scrollIntoView({ behavior: 'smooth' })} className="w-full sm:w-auto px-10 py-5 bg-[var(--accent)] hover:brightness-110 text-white font-bold rounded-xl text-lg shadow-xl shadow-orange-900/20 transition-all transform hover:-translate-y-1 flex items-center justify-center gap-2">
                                            Secure Your Spot Free <ChevronRight size={20} />
                                        </button>
                                    </div>
                                </div>
                            </section>

                            {/* FEATURES (VALUE PROPOSITION) */}
                            <section className="py-24 px-6 bg-white relative z-20 -mt-10 rounded-t-[40px]">
                                <div className="max-w-6xl mx-auto">
                                    <div className="text-center mb-16">
                                        <h2 className="text-3xl md:text-4xl font-bold text-[var(--primary)] mb-4">Why This MPSC/UPSC Webinar is Mandatory</h2>
                                        <div className="w-24 h-1.5 bg-[var(--accent)] mx-auto rounded-full"></div>
                                    </div>
                                    <div className="grid md:grid-cols-3 gap-8">
                                        {[
                                            { icon: <BookOpen className="text-[var(--accent)]" size={32} />, title: "Decoding the Syllabus", desc: "Understand exactly what the MPSC/UPSC Commission expects in 2025." },
                                            { icon: <Clock className="text-[var(--accent)]" size={32} />, title: "Time-Blocking Strategy", desc: "Scientific routine management for working professionals and students." },
                                            { icon: <Award className="text-[var(--accent)]" size={32} />, title: "The Framework Method", desc: "Draft high-scoring descriptive answers in under 8 minutes." }
                                        ].map((item, i) => (
                                            <div key={i} className="p-8 rounded-2xl bg-slate-50 hover:shadow-xl transition-all border border-slate-100 hover:border-[var(--accent)]">
                                                <div className="w-16 h-16 bg-white rounded-2xl flex items-center justify-center mb-6 shadow-sm">{item.icon}</div>
                                                <h3 className="text-xl font-bold text-[var(--primary)] mb-3">{item.title}</h3>
                                                <p className="text-slate-600">{item.desc}</p>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </section>

                            {/* AGENDA SECTION */}
                            <section className="py-24 px-6 bg-[var(--primary)] text-white">
                                <div className="max-w-6xl mx-auto">
                                    <div className="text-center mb-16">
                                        <h2 className="text-3xl md:text-4xl font-bold mb-4 text-white">Webinar Agenda & Syllabus Breakdown</h2>
                                        <p className="text-slate-300 text-lg">What will you learn in this FREE UPSC/MPSC Webinar?</p>
                                        <div className="w-24 h-1.5 bg-[var(--accent)] mx-auto rounded-full mt-4"></div>
                                    </div>
                                    <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                                        {[
                                            { id: 1, text: "What is UPSC/MPSC? A detailed analysis for beginners." },
                                            { id: 2, text: "Posts under UPSC/MPSC â€“ Eligibility and qualifications required." },
                                            { id: 3, text: "Can UPSC CSE & MPSC Rajyaseva be prepared together?" },
                                            { id: 4, text: "How many months of study are required to crack UPSC/MPSC?" },
                                            { id: 5, text: "Complete analysis of UPSC/MPSC syllabus 2025." },
                                            { id: 6, text: "Common obstacles faced at the beginning of preparation & their solutions." },
                                            { id: 7, text: "Should you prepare in Marathi or English medium?" },
                                            { id: 8, text: "Which books to start with for MPSC Combine & subject focus areas." }
                                        ].map((item) => (
                                            <div key={item.id} className="bg-white/10 backdrop-blur-md border border-white/10 p-6 rounded-2xl hover:bg-white/20 transition-all group">
                                                <div className="w-10 h-10 rounded-full bg-[var(--accent)] text-[var(--primary)] font-bold flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                                                    {item.id}
                                                </div>
                                                <p className="font-medium text-slate-100 leading-relaxed">{item.text}</p>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </section>

                            {/* 5 SECRETS OF SUCCESS SECTION */}
                            <section className="py-24 px-6 bg-slate-900 text-white border-t border-slate-800">
                                <div className="max-w-6xl mx-auto">
                                    <div className="text-center mb-16">
                                        <h2 className="text-3xl md:text-4xl font-bold mb-4">The 5 Secrets of Success for Competitive Exams</h2>
                                        <div className="w-24 h-1.5 bg-[var(--accent)] mx-auto rounded-full"></div>
                                    </div>
                                    <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                                        <div className="bg-slate-800 p-8 rounded-2xl border-l-4 border-[var(--accent)] hover:translate-y-[-5px] transition-transform">
                                            <div className="mb-4 text-[var(--accent)]"><Zap size={32} /></div>
                                            <h3 className="text-xl font-bold mb-2">Secret 1</h3>
                                            <p className="text-slate-300">UPSC/MPSC doesn't need subject experts; it needs great administrators.</p>
                                        </div>
                                        <div className="bg-slate-800 p-8 rounded-2xl border-l-4 border-[var(--accent)] hover:translate-y-[-5px] transition-transform">
                                            <div className="mb-4 text-[var(--accent)]"><Scale size={32} /></div>
                                            <h3 className="text-xl font-bold mb-2">Secret 2</h3>
                                            <p className="text-slate-300">Balance between conceptual clarity & memorisation is the key.</p>
                                        </div>
                                        <div className="bg-slate-800 p-8 rounded-2xl border-l-4 border-[var(--accent)] hover:translate-y-[-5px] transition-transform">
                                            <div className="mb-4 text-[var(--accent)]"><Target size={32} /></div>
                                            <h3 className="text-xl font-bold mb-2">Secret 3</h3>
                                            <p className="text-slate-300">Minimum Material, Maximum Revision is the real success mantra.</p>
                                        </div>
                                        <div className="bg-slate-800 p-8 rounded-2xl border-l-4 border-[var(--accent)] hover:translate-y-[-5px] transition-transform md:col-span-1 lg:col-span-1.5">
                                            <div className="mb-4 text-[var(--accent)]"><FileText size={32} /></div>
                                            <h3 className="text-xl font-bold mb-2">Secret 4</h3>
                                            <p className="text-slate-300">Previous year papers are a must to understand the exam.</p>
                                        </div>
                                        <div className="bg-slate-800 p-8 rounded-2xl border-l-4 border-[var(--accent)] hover:translate-y-[-5px] transition-transform md:col-span-1 lg:col-span-1.5">
                                            <div className="mb-4 text-[var(--accent)]"><Brain size={32} /></div>
                                            <h3 className="text-xl font-bold mb-2">Secret 5</h3>
                                            <p className="text-slate-300">Focus on conceptual learning, not just finishing books.</p>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            {/* AUTHORITY SECTION (DR. VISHAL BHEDURKAR) */}
                            <section className="py-24 px-6 bg-white">
                                <div className="max-w-5xl mx-auto">
                                    <div className="bg-[var(--primary)] rounded-[2.5rem] overflow-hidden shadow-2xl text-white border border-slate-800 transition-colors duration-300">
                                        <div className="flex flex-col md:flex-row">
                                            <div className="md:w-5/12 bg-slate-900 relative min-h-[450px] group overflow-hidden">
                                                <img 
                                                    src="https://www.dnyanjyoti.com/wp-content/uploads/2025/04/MD-Photo.jpg" 
                                                    alt="Dr. Vishal Bhedurkar - Top MPSC/UPSC Mentor in Pune" 
                                                    className="absolute inset-0 w-full h-full object-cover object-top opacity-90 transition-transform duration-700"
                                                    onError={(e) => {
                                                        e.target.src = "https://images.unsplash.com/photo-1560250097-0b93528c311a?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80"
                                                    }}
                                                />
                                                <div className="absolute inset-0 bg-gradient-to-t from-[var(--primary)] via-transparent to-transparent opacity-90"></div>
                                                <div className="absolute bottom-6 left-6 right-6">
                                                    <div className="bg-white/10 backdrop-blur-md border border-white/20 p-4 rounded-xl">
                                                        <p className="font-serif italic text-blue-100 text-sm">"Success isn't about reading more. It's about thinking clearly."</p>
                                                    </div>
                                                </div>
                                            </div>

                                            <div className="md:w-7/12 p-8 md:p-14 flex flex-col justify-center">
                                                <h3 className="text-[var(--accent)] font-bold tracking-widest uppercase text-xs mb-3">Your Mentor</h3>
                                                <h2 className="text-3xl md:text-4xl font-bold mb-6 font-serif">Dr. Vishal Bhedurkar</h2>
                                                <p className="text-slate-400 mb-10 leading-relaxed text-lg">
                                                    Founder & Director of Dnyanjyoti Education. With a heart for students and a mind for strategy, Dr. Vishal has transformed the lives of thousands of aspirants in Pune through precision mentorship.
                                                </p>
                                                
                                                <div className="grid grid-cols-2 gap-y-8 gap-x-4">
                                                    <div>
                                                        <h4 className="text-4xl font-extrabold text-white">12+</h4>
                                                        <p className="text-sm text-slate-500 uppercase tracking-wide mt-1">Years Experience</p>
                                                    </div>
                                                    <div>
                                                        <h4 className="text-4xl font-extrabold text-white">1000+</h4>
                                                        <p className="text-sm text-slate-500 uppercase tracking-wide mt-1">Officers Guided</p>
                                                    </div>
                                                    <div>
                                                        <h4 className="text-4xl font-extrabold text-white">350+</h4>
                                                        <p className="text-sm text-slate-500 uppercase tracking-wide mt-1">Final Selections</p>
                                                    </div>
                                                    <div>
                                                        <h4 className="text-4xl font-extrabold text-white">4</h4>
                                                        <p className="text-sm text-slate-500 uppercase tracking-wide mt-1">Centers in Pune</p>
                                                    </div>
                                                    {/* New Stat */}
                                                    <div className="col-span-2">
                                                        <h4 className="text-4xl font-extrabold text-white">1 Lakh+</h4>
                                                        <p className="text-sm text-slate-500 uppercase tracking-wide mt-1">Students Attended Webinar</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            {/* WHY REGISTER & WHAT YOU GET SECTION */}
                            <section className="py-24 px-6 bg-slate-50">
                                <div className="max-w-6xl mx-auto grid md:grid-cols-2 gap-12">
                                    {/* Why Register */}
                                    <div className="bg-white p-8 rounded-3xl shadow-xl border border-slate-100">
                                        <div className="flex items-center gap-4 mb-6">
                                            <div className="w-12 h-12 rounded-full bg-blue-100 text-[var(--primary)] flex items-center justify-center">
                                                <Star size={24} />
                                            </div>
                                            <h3 className="text-2xl font-bold text-[var(--primary)]">Why Should You Register?</h3>
                                        </div>
                                        <ul className="space-y-4">
                                            {[
                                                "Get clarity on the changing exam pattern and stay ahead of the competition.",
                                                "Learn time-tested strategies directly from expert mentors.",
                                                "Avoid common pitfalls that 90% of aspirants make in their first year.",
                                                "Understand how to balance prelims and mains preparation effectively."
                                            ].map((item, i) => (
                                                <li key={i} className="flex gap-3 text-slate-700">
                                                    <CheckCircle size={20} className="text-[var(--accent)] shrink-0 mt-1" />
                                                    <span>{item}</span>
                                                </li>
                                            ))}
                                        </ul>
                                    </div>

                                    {/* What You Get */}
                                    <div className="bg-white p-8 rounded-3xl shadow-xl border border-slate-100">
                                        <div className="flex items-center gap-4 mb-6">
                                            <div className="w-12 h-12 rounded-full bg-green-100 text-green-700 flex items-center justify-center">
                                                <Download size={24} />
                                            </div>
                                            <h3 className="text-2xl font-bold text-[var(--primary)]">What Will You Get?</h3>
                                        </div>
                                        <ul className="space-y-4">
                                            {[
                                                "Exclusive access to the live webinar session.",
                                                "A comprehensive PDF guide on the new descriptive pattern.",
                                                "Direct Q&A opportunity with Dr. Vishal Bhedurkar.",
                                                "Priority access to upcoming foundation batches."
                                            ].map((item, i) => (
                                                <li key={i} className="flex gap-3 text-slate-700">
                                                    <CheckCircle size={20} className="text-green-600 shrink-0 mt-1" />
                                                    <span>{item}</span>
                                                </li>
                                            ))}
                                        </ul>
                                    </div>
                                </div>
                            </section>

                            {/* REGISTRATION FORM SECTION */}
                            <section id="reg-form" className="py-24 px-6 bg-[var(--bg-body)]">
                                <div className="max-w-xl mx-auto bg-white rounded-3xl shadow-2xl p-8 md:p-12 relative overflow-hidden border border-slate-100">
                                    <div className="absolute top-0 left-0 w-full h-2 bg-[var(--accent)]"></div>
                                    <div className="text-center mb-8">
                                        <h2 className="text-3xl font-bold text-[var(--primary)]">Secure Your Seat</h2>
                                        <p className="text-slate-500 mt-2">Unlock the pre-webinar study PDF immediately.</p>
                                    </div>
                                    <form onSubmit={handleRegister} className="space-y-5">
                                        <input required name="fullName" placeholder="Full Name" className="w-full px-4 py-4 rounded-xl bg-slate-50 border border-slate-200 focus:border-[var(--accent)] outline-none transition-colors" />
                                        <input required name="email" type="email" placeholder="Email Address" className="w-full px-4 py-4 rounded-xl bg-slate-50 border border-slate-200 focus:border-[var(--accent)] outline-none transition-colors" />
                                        <input required name="phone" type="tel" placeholder="Phone Number" className="w-full px-4 py-4 rounded-xl bg-slate-50 border border-slate-200 focus:border-[var(--accent)] outline-none transition-colors" />
                                        <button disabled={isSubmitting} type="submit" className="w-full py-5 bg-[var(--primary)] text-white font-bold rounded-xl text-lg hover:brightness-110 transition-all flex items-center justify-center gap-2">
                                            {isSubmitting ? 'Registering...' : <span>Register & Unlock PDF <ChevronRight size={20} className="inline"/></span>}
                                        </button>
                                        
                                        {/* Value Proposition Line */}
                                        <div className="mt-6 p-4 bg-orange-50 border border-orange-100 rounded-xl text-center">
                                            <p className="text-sm font-bold text-slate-800 flex items-center justify-center gap-2">
                                                <span className="text-xl">ðŸ‘‰</span> 
                                                By registering, you get a chance to attend this <span className="text-[var(--primary)] underline decoration-[var(--accent)] decoration-2">â‚¹3999/- value Webinar</span> absolutely FREE!
                                            </p>
                                        </div>

                                        <p className="text-center text-xs text-slate-400 mt-2">Limited spots available for serious aspirants.</p>
                                    </form>
                                </div>
                            </section>
                        </div>
                    )}
                </div>
            );
        };

        function renderReactApp(isOffline = false) {
            const root = createRoot(document.getElementById('root'));
            root.render(<App isOffline={isOffline} />);
        }

        // Initialize
        initApp();

        // Global Error Handler for the "White Screen"
        window.onerror = function(message, source, lineno, colno, error) {
            document.getElementById('root').style.display = 'none';
            const errContainer = document.getElementById('error-container');
            errContainer.style.display = 'block';
            document.getElementById('error-message').innerText = message + " (Line: " + lineno + ")";
        };
    </script>
</body>
</html>