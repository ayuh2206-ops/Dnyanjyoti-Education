<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Performance: Preconnect -->
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://esm.sh">
    <link rel="preconnect" href="https://www.gstatic.com">

    <!-- SEO Meta Tags -->
    <title>MPSC/UPSC Coaching Pune | Free Webinar by Dnyanjyoti Education</title>
    <meta name="description" content="Join the best MPSC & UPSC coaching in Pune. Attend Dr. Vishal Bhedurkar's FREE webinar on the new descriptive pattern, syllabus, and strategy. 1 Lakh+ students guided. Register now!">
    
    <!-- Critical CSS -->
    <style>
        body { background-color: #F8FAFC; color: #0f172a; font-family: sans-serif; margin: 0; }
        .loading-container { 
            height: 100vh; width: 100vw; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; gap: 1rem; 
            position: fixed; top: 0; left: 0; background: #F8FAFC; z-index: 9999;
        }
        .spinner { 
            border: 4px solid rgba(0, 0, 0, 0.1); width: 40px; height: 40px; 
            border-radius: 50%; border-left-color: #EA580C; 
            animation: spin 1s linear infinite; 
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        html { scroll-behavior: smooth; }
    </style>

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { primary: '#002244', accent: '#EA580C', bgBody: '#F8FAFC' },
                    animation: { 'fade-in': 'fadeIn 0.5s ease-out' },
                    keyframes: { fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } } }
                }
            }
        }
    </script>

    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.300.0",
            "firebase/app": "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js",
            "firebase/firestore": "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"
        }
    }
    </script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-bgBody text-slate-900">

    <div id="root">
        <div class="loading-container">
            <div class="spinner"></div>
            <p style="color: #64748b; font-size: 0.875rem; font-weight: 500;">Loading...</p>
        </div>
    </div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            CheckCircle, Play, Pause, MessageCircle, Send, ChevronRight, 
            Download, ShieldCheck, Settings, Lock, Unlock, Video, X, Star, Zap, Target, FileText,
            Eye, RotateCcw, Instagram, Facebook, Users, ArrowLeft, Trash2, Edit2, Home, Brain, Scale
        } from 'lucide-react';

        let db = null;
        let firestoreFuncs = {};

        async function initApp() {
            try {
                const { initializeApp } = await import('firebase/app');
                const { getFirestore } = await import('firebase/firestore');
                
                const firebaseConfig = {
                    apiKey: "AIzaSyD1hJ4WPm3vTUuNvU4O7MJDfTpbq_SH29U",
                    authDomain: "dnyanjyoti-landing-page.firebaseapp.com",
                    projectId: "dnyanjyoti-landing-page",
                    storageBucket: "dnyanjyoti-landing-page.firebasestorage.app",
                    messagingSenderId: "1084755815698",
                    appId: "1:1084755815698:web:ae3ab3aa88b573fd9ad7cb"
                };
                
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                const fs = await import('firebase/firestore');
                firestoreFuncs = { ...fs };
                renderReactApp(false);
            } catch (err) {
                console.error("Firebase error:", err);
                renderReactApp(true);
            }
        }

        const DEFAULT_SETTINGS = {
            theme: { primary: '#002244', accent: '#EA580C' },
            videoConfig: { src: '', title: 'Message from Dr. Vishal' },
            pdfConfig: { url: '', title: 'Study Material PDF' },
            socialLinks: { whatsapp: '#', telegram: '#', instagram: '#', facebook: '#' },
            adminPasskey: 'admin123'
        };

        const t = {
            heroTitle1: "Register Now to Guarantee Your",
            heroTitle2: "Success in UPSC/MPSC Exams!",
            heroSubtitle: "Master the exact Framework Method used by 350+ Officers to crack MPSC/UPSC.",
            secureSpot: "Secure Your Spot Free",
            getStudyMaterial: "Get Free Study Material",
            whatYouGet: "What You Will Get in the Webinar:",
            fullName: "Full Name",
            emailAddress: "Email Address",
            phoneNumber: "Phone Number",
            registerButton: "Register & Unlock PDF",
            registering: "Registering...",
            registrationSuccess: "Registration Successful!",
            seatReserved: "Your seat has been reserved.",
            downloadPDFNow: "Download PDF Now",
            exclusiveWebinar: "Exclusive Webinar Event"
        };

        const App = ({ isOffline }) => {
            const [currentPage, setCurrentPage] = useState('landing');
            const [isAdmin, setIsAdmin] = useState(false);
            const [showLoginModal, setShowLoginModal] = useState(false);
            const [loginPasskey, setLoginPasskey] = useState('');
            const [showPassword, setShowPassword] = useState(false);
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [settings, setSettings] = useState(DEFAULT_SETTINGS);
            const [dbPasskey, setDbPasskey] = useState(null);

            const handleRegister = async (e) => {
                e.preventDefault();
                setIsSubmitting(true);
                if (isOffline) {
                    setTimeout(() => { setCurrentPage('thankyou'); setIsSubmitting(false); }, 1000);
                    return;
                }
                const formData = new FormData(e.currentTarget);
                const leadData = {
                    name: formData.get('fullName'),
                    email: formData.get('email'),
                    phone: formData.get('phone'),
                    registeredAt: new Date().toISOString(),
                    source: 'web_en',
                    language: 'en'
                };
                try {
                    await firestoreFuncs.addDoc(firestoreFuncs.collection(db, "leads"), leadData);
                    setTimeout(() => { setCurrentPage('thankyou'); setIsSubmitting(false); }, 500);
                } catch (error) {
                    alert("Registration failed.");
                    setIsSubmitting(false);
                }
            };

            return (
                <div style={{ '--primary': settings.theme.primary, '--accent': settings.theme.accent }} className="font-sans">
                    {currentPage === 'thankyou' ? (
                        <div className="min-h-screen py-12 px-6 flex items-center justify-center bg-[var(--primary)] text-white">
                            <div className="max-w-2xl w-full bg-white text-slate-900 rounded-3xl shadow-2xl p-12 text-center">
                                <div className="w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6">
                                    <CheckCircle className="text-white" size={48} />
                                </div>
                                <h1 className="text-4xl font-bold mb-4">{t.registrationSuccess}</h1>
                                <p className="text-lg text-slate-600">{t.seatReserved}</p>
                                {settings.pdfConfig?.url && (
                                    <a href={settings.pdfConfig.url} target="_blank" rel="noopener noreferrer"
                                       className="inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-4 rounded-xl font-bold mt-8">
                                        <Download size={20} /> {t.downloadPDFNow}
                                    </a>
                                )}
                            </div>
                        </div>
                    ) : (
                        <div>
                            <section className="relative pt-24 pb-32 px-6 bg-[var(--primary)] text-white">
                                <div className="max-w-5xl mx-auto text-center">
                                    <div className="inline-flex items-center px-4 py-1.5 rounded-full bg-slate-900/50 border border-orange-600/30 mb-8">
                                        <span className="text-orange-600 font-extrabold uppercase text-sm">{t.exclusiveWebinar}</span>
                                    </div>
                                    <h1 className="text-4xl md:text-6xl font-extrabold mb-8">
                                        {t.heroTitle1}<br/>
                                        <span className="text-orange-600">{t.heroTitle2}</span>
                                    </h1>
                                    <p className="text-xl text-slate-300 mb-12 max-w-3xl mx-auto">{t.heroSubtitle}</p>
                                    <button onClick={() => document.getElementById('reg-form')?.scrollIntoView({ behavior: 'smooth' })}
                                            className="px-10 py-4 bg-orange-600 hover:bg-orange-700 text-white font-bold rounded-xl text-lg">
                                        {t.secureSpot} â†’
                                    </button>
                                </div>
                            </section>

                            <section id="reg-form" className="py-24 px-6 bg-slate-50">
                                <div className="max-w-xl mx-auto bg-white rounded-3xl shadow-2xl p-12">
                                    <h2 className="text-3xl font-bold text-center text-[var(--primary)] mb-8">Register Now</h2>
                                    <form onSubmit={handleRegister} className="space-y-5">
                                        <input required name="fullName" placeholder={t.fullName}
                                               className="w-full px-4 py-4 rounded-xl bg-slate-50 border border-slate-200 outline-none" />
                                        <input required name="email" type="email" placeholder={t.emailAddress}
                                               className="w-full px-4 py-4 rounded-xl bg-slate-50 border border-slate-200 outline-none" />
                                        <input required name="phone" type="tel" placeholder={t.phoneNumber}
                                               className="w-full px-4 py-4 rounded-xl bg-slate-50 border border-slate-200 outline-none" />
                                        <button disabled={isSubmitting} type="submit"
                                                className="w-full py-5 bg-[var(--primary)] text-white font-bold rounded-xl text-lg">
                                            {isSubmitting ? t.registering : t.registerButton}
                                        </button>
                                    </form>
                                </div>
                            </section>
                        </div>
                    )}
                </div>
            );
        };

        function renderReactApp(isOffline = false) {
            const root = createRoot(document.getElementById('root'));
            root.render(<App isOffline={isOffline} />);
            setTimeout(() => {
                const loading = document.querySelector('.loading-container');
                if (loading) loading.remove();
            }, 500);
        }

        initApp();
    </script>
</body>
</html>
