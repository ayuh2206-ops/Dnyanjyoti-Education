<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>MPSC/UPSC Coaching Pune | Free Webinar by Dnyanjyoti Education</title>
    <meta name="description" content="Join the best MPSC & UPSC coaching in Pune. Attend Dr. Vishal Bhedurkar's FREE webinar on the new descriptive pattern, syllabus, and strategy. 1 Lakh+ students guided. Register now!">
    <meta name="keywords" content="MPSC coaching Pune, UPSC classes Pune, MPSC syllabus 2025, UPSC preparation strategy, Civil Services Exam guidance, Dr. Vishal Bhedurkar, Dnyanjyoti Education, competitive exam webinar">
    <meta name="author" content="Dnyanjyoti Education">
    <meta name="robots" content="index, follow">

    <!-- Open Graph for Social Sharing -->
    <meta property="og:title" content="Unlock MPSC/UPSC Success | Free Webinar">
    <meta property="og:description" content="Master the new descriptive pattern with Dr. Vishal Bhedurkar. Register for the free webinar today!">
    <meta property="og:image" content="https://www.dnyanjyoti.com/wp-content/uploads/2025/04/MD-Photo.jpg">
    <meta property="og:url" content="https://dnyanjyoti-education.vercel.app/">
    <meta property="og:type" content="website">

    <!-- PERFORMANCE: Preconnect to CDNs -->
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://esm.sh">
    <link rel="preconnect" href="https://www.gstatic.com">
    <link rel="preconnect" href="https://www.dnyanjyoti.com">
    
    <!-- PERFORMANCE: Preload LCP Image -->
    <link rel="preload" as="image" href="https://res-console.cloudinary.com/dkkkjtoa9/thumbnails/v1/image/upload/v1765787346/aW1hZ2U2NTU1X21oNnYyeg==/drilldown" fetchpriority="high">

    <!-- Critical CSS -->
    <style>
        body { background-color: #F8FAFC; color: #0f172a; font-family: sans-serif; font-display: swap; }
        .spinner { border: 4px solid rgba(0, 0, 0, 0.1); width: 36px; height: 36px; border-radius: 50%; border-left-color: #EA580C; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        html { scroll-behavior: smooth; }
    </style>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { primary: '#002244', accent: '#EA580C', bgBody: '#F8FAFC' },
                    animation: { 'fade-in': 'fadeIn 0.5s ease-out' },
                    keyframes: { fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } } }
                }
            }
        }
    </script>

    <!-- Import Map -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.300.0",
            "firebase/app": "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js",
            "firebase/firestore": "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"
        }
    }
    </script>

    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "EducationEvent",
      "name": "MPSC/UPSC Strategy Webinar",
      "description": "A free webinar on the new MPSC/UPSC descriptive pattern.",
      "startDate": "2025-12-15T10:00:00+05:30",
      "endDate": "2025-12-15T12:00:00+05:30",
      "eventStatus": "https://schema.org/EventScheduled",
      "eventAttendanceMode": "https://schema.org/OnlineEventAttendanceMode",
      "location": { "@type": "VirtualLocation", "url": "https://dnyanjyoti-education.vercel.app/" },
      "image": [ "https://www.dnyanjyoti.com/wp-content/uploads/2025/04/MD-Photo.jpg" ],
      "organizer": { "@type": "Organization", "name": "Dnyanjyoti Education", "url": "https://www.dnyanjyoti.com" },
      "offers": { "@type": "Offer", "price": "0", "priceCurrency": "INR", "availability": "https://schema.org/InStock" }
    }
    </script>
</head>
<body class="bg-bgBody text-slate-900">

    <!-- Error Container -->
    <div id="error-container" style="display:none; padding: 20px; background: #fee2e2; color: #b91c1c; margin: 20px; border-radius: 8px; border: 1px solid #f87171;">
        <h3 style="font-weight: bold; margin-bottom: 8px;">Application Failed to Load</h3>
        <p id="error-message">Unknown Error</p>
        <p style="font-size: 0.8em; margin-top: 8px;">Tip: Ensure <code>firebase-config.js</code> is in the same folder and you are running this on a local server (http://localhost), not by double-clicking the file.</p>
    </div>

    <!-- App Root -->
    <div id="root">
        <div class="h-screen flex items-center justify-center flex-col gap-4">
            <div class="spinner"></div>
            <p class="text-slate-500 text-sm">Loading Application...</p>
        </div>
    </div>

    <!-- Main Script -->
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            CheckCircle, Play, Pause, MessageCircle, Send, ChevronRight, 
            BookOpen, Clock, Award, Download, ShieldCheck, Settings, 
            Lock, Unlock, Video, X, Star, Zap, Target, Brain, Scale, FileText,
            Eye, RotateCcw, Instagram, Facebook, Users, ArrowLeft, Trash2, Edit2, Home, FileDown, Search
        } from 'lucide-react';

        // Collection name for English leads
        const LEADS_COLLECTION = 'leads_en';
        const SETTINGS_DOC = 'settings_en';

        let db = null;
        let firestoreFuncs = {};

        async function initApp() {
            try {
                const firebaseConfig = await import('./firebase-config.js');
                db = firebaseConfig.db;
                const fs = await import('firebase/firestore');
                firestoreFuncs = { ...fs };
                if (!db) throw new Error("Database object is undefined from config file.");
                renderReactApp(false);
            } catch (err) {
                console.error("Firebase Load Error:", err);
                console.warn("Running in Offline/Demo Mode.");
                renderReactApp(true);
            }
        }

        const DEFAULT_SETTINGS = {
            theme: { primary: '#002244', accent: '#EA580C', background: '#F8FAFC' },
            videoConfig: { type: 'none', src: '', title: 'Message from Dr. Vishal' },
            socialLinks: { whatsapp: '#', telegram: '#', instagram: '#', facebook: '#' },
            adminPasskey: 'admin123'
        };

        const CustomVideoPlayer = ({ videoSource }) => {
            const videoRef = useRef(null);
            const [isPlaying, setIsPlaying] = useState(false);
            const [showControls, setShowControls] = useState(true);

            const togglePlay = () => {
                if (videoRef.current) {
                    isPlaying ? videoRef.current.pause() : videoRef.current.play();
                    setIsPlaying(!isPlaying);
                }
            };

            return (
                <div className="relative w-full h-full group bg-black rounded-2xl overflow-hidden shadow-2xl border-4 border-white ring-1 ring-slate-200"
                    onMouseEnter={() => setShowControls(true)}
                    onMouseLeave={() => isPlaying && setShowControls(false)}>
                    {!videoSource.src ? (
                        <div className="absolute inset-0 flex flex-col items-center justify-center bg-slate-900 text-slate-500 h-64 md:h-full">
                           <Video size={48} className="mb-4 opacity-50" />
                           <p>No Video Configured</p>
                        </div>
                    ) : (
                        <video ref={videoRef} src={videoSource.src} className="w-full h-full object-cover" onClick={togglePlay} onEnded={() => setIsPlaying(false)} playsInline />
                    )}
                    {showControls && videoSource.src && (
                        <div className="absolute inset-0 bg-black/40 flex flex-col justify-between p-6 transition-opacity duration-300">
                            <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                                <button onClick={togglePlay} className="w-20 h-20 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center pointer-events-auto hover:scale-110 transition-transform" aria-label="Play Video">
                                    {isPlaying ? <Pause className="fill-white text-white" /> : <Play className="fill-white text-white ml-1" />}
                                </button>
                            </div>
                            <div className="mt-auto pointer-events-none">
                               <p className="text-white font-bold text-lg drop-shadow-md">{videoSource.title}</p>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const App = ({ isOffline }) => {
            const [currentPage, setCurrentPage] = useState('landing');
            const [isAdmin, setIsAdmin] = useState(false);
            const [showLoginModal, setShowLoginModal] = useState(false);
            const [loginPasskey, setLoginPasskey] = useState('');
            const [isSettingNewPasskey, setIsSettingNewPasskey] = useState(false);
            const [showPassword, setShowPassword] = useState(false);
            const [adminPanelOpen, setAdminPanelOpen] = useState(false);
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [settings, setSettings] = useState(DEFAULT_SETTINGS);
            const [dbPasskey, setDbPasskey] = useState(null); 
            const [leads, setLeads] = useState([]);
            const [isLoadingLeads, setIsLoadingLeads] = useState(false);
            const [searchTerm, setSearchTerm] = useState('');

            useEffect(() => {
                if (isOffline || !db) return;
                try {
                    const unsubscribe = firestoreFuncs.onSnapshot(firestoreFuncs.doc(db, "settings", SETTINGS_DOC), (docSnap) => {
                        if (docSnap.exists()) {
                            const data = docSnap.data();
                            setDbPasskey(data.adminPasskey || null);
                            setSettings(prev => ({ ...prev, ...data, socialLinks: { ...prev.socialLinks, ...data.socialLinks } }));
                        } else { setDbPasskey(null); }
                    });
                    return () => unsubscribe();
                } catch (e) { console.warn("Sync failed", e); }
            }, [isOffline]);

            const fetchLeads = async () => {
                if (isOffline) return;
                setIsLoadingLeads(true);
                try {
                    const q = firestoreFuncs.query(firestoreFuncs.collection(db, LEADS_COLLECTION), firestoreFuncs.orderBy("registeredAt", "desc"));
                    const querySnapshot = await firestoreFuncs.getDocs(q);
                    setLeads(querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));
                } catch (e) { 
                    try {
                        const q = firestoreFuncs.collection(db, LEADS_COLLECTION);
                        const querySnapshot = await firestoreFuncs.getDocs(q);
                        setLeads(querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));
                    } catch(err) { console.error(err); }
                } finally { setIsLoadingLeads(false); }
            };

            const handleDeleteLead = async (id) => {
                if (!confirm("Delete this registration?")) return;
                try { await firestoreFuncs.deleteDoc(firestoreFuncs.doc(db, LEADS_COLLECTION, id)); setLeads(leads.filter(l => l.id !== id)); } catch(e) { alert(e.message); }
            };

            const handleEditLead = async (lead) => {
                const newName = prompt("Edit Name:", lead.name); if(newName===null) return;
                const newEmail = prompt("Edit Email:", lead.email); if(newEmail===null) return;
                const newPhone = prompt("Edit Phone:", lead.phone); if(newPhone===null) return;
                try { 
                    await firestoreFuncs.updateDoc(firestoreFuncs.doc(db, LEADS_COLLECTION, lead.id), { name: newName, email: newEmail, phone: newPhone });
                    setLeads(leads.map(l => l.id === lead.id ? {...l, name: newName, email: newEmail, phone: newPhone} : l));
                } catch(e) { alert(e.message); }
            };

            // CSV Export Function
            const exportToCSV = () => {
                if (leads.length === 0) {
                    alert("No leads to export!");
                    return;
                }
                
                const headers = ['Name', 'Email', 'Phone', 'Registration Date', 'Source'];
                const csvContent = [
                    headers.join(','),
                    ...leads.map(lead => [
                        `"${lead.name || ''}"`,
                        `"${lead.email || ''}"`,
                        `"${lead.phone || ''}"`,
                        `"${new Date(lead.registeredAt).toLocaleString()}"`,
                        `"${lead.source || 'web'}"`
                    ].join(','))
                ].join('\n');

                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', `leads_english_${new Date().toISOString().split('T')[0]}.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };

            const filteredLeads = leads.filter(lead => 
                lead.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||
                lead.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||
                lead.phone?.includes(searchTerm)
            );

            const submitLogin = async () => {
                if (!loginPasskey.trim()) return alert("Enter passkey.");
                if (isSettingNewPasskey) {
                    if (isOffline) return alert("Offline.");
                    try { 
                        await firestoreFuncs.setDoc(firestoreFuncs.doc(db, "settings", SETTINGS_DOC), { adminPasskey: loginPasskey.trim() }, { merge: true });
                        setIsAdmin(true); setAdminPanelOpen(true); setShowLoginModal(false);
                    } catch (e) { alert(e.message); }
                } else {
                    if (loginPasskey === dbPasskey) { setIsAdmin(true); setAdminPanelOpen(true); setShowLoginModal(false); } else { alert("Incorrect Passkey"); }
                }
            };

            const saveSettings = async (newSettings) => {
                if (isOffline) return alert("Offline.");
                try { 
                    setSettings(newSettings); 
                    await firestoreFuncs.setDoc(firestoreFuncs.doc(db, "settings", SETTINGS_DOC), newSettings, { merge: true }); 
                } catch (err) { alert(err.message); }
            };

            const resetSettings = async () => {
                if(!confirm("Reset all settings?")) return;
                try { 
                    const resetData = { ...DEFAULT_SETTINGS, adminPasskey: dbPasskey }; 
                    setSettings(DEFAULT_SETTINGS); 
                    await firestoreFuncs.setDoc(firestoreFuncs.doc(db, "settings", SETTINGS_DOC), resetData, { merge: true }); 
                } catch (err) { alert(err.message); }
            }

            const handleRegister = async (e) => {
                e.preventDefault(); setIsSubmitting(true);
                if (isOffline) { setTimeout(() => { setCurrentPage('thankyou'); window.scrollTo(0,0); setIsSubmitting(false); }, 1000); return; }
                const formData = new FormData(e.currentTarget);
                const leadData = { name: formData.get('fullName'), email: formData.get('email'), phone: formData.get('phone'), registeredAt: new Date().toISOString(), source: 'web_en' };
                try { 
                    await firestoreFuncs.addDoc(firestoreFuncs.collection(db, LEADS_COLLECTION), leadData); 
                    setTimeout(() => { setCurrentPage('thankyou'); window.scrollTo(0,0); setIsSubmitting(false); }, 500); 
                } catch (error) { alert("Failed. Check console."); setIsSubmitting(false); }
            };

            return (
                <div style={{ '--primary': settings.theme.primary, '--accent': settings.theme.accent }} className="animate-fade-in font-sans">
                    
                    {/* Admin Toggle */}
                    <div className="fixed bottom-6 right-6 z-50 flex flex-col items-end">
                        <button onClick={() => { if(isAdmin) setAdminPanelOpen(!adminPanelOpen); else { setShowLoginModal(true); setLoginPasskey(''); setIsSettingNewPasskey(!dbPasskey); } }} 
                            className={`p-3 rounded-full shadow-xl border transition-all ${isAdmin ? 'bg-slate-900 text-white' : 'bg-white text-slate-400 hover:text-[var(--accent)]'}`} aria-label="Admin Login">
                            {isAdmin ? <Settings size={24} /> : <Lock size={20} />}
                        </button>

                        {/* Login Modal */}
                        {showLoginModal && (
                            <div className="absolute bottom-16 right-0 bg-white p-4 rounded-2xl shadow-2xl border border-slate-200 w-72 mb-2 animate-fade-in z-50">
                                <div className="flex justify-between items-center mb-3">
                                    <h3 className="font-bold text-sm text-slate-800">{isSettingNewPasskey ? "Set New Passkey" : "Admin Login"}</h3>
                                    <button onClick={() => setShowLoginModal(false)} className="text-slate-400 hover:text-red-500"><X size={16}/></button>
                                </div>
                                <p className="text-xs text-slate-500 mb-3">{isSettingNewPasskey ? "Create a secure passkey." : "Enter passkey to unlock."}</p>
                                <div className="relative mb-3">
                                    <input type={showPassword ? "text" : "password"} value={loginPasskey} onChange={(e) => setLoginPasskey(e.target.value)} className="w-full text-sm p-2 border rounded outline-none pr-8" placeholder="Passkey" />
                                    <button onClick={() => setShowPassword(!showPassword)} className="absolute right-2 top-2.5 text-slate-400"><Eye size={14}/></button>
                                </div>
                                <button onClick={submitLogin} className="w-full bg-[var(--primary)] text-white py-2 rounded text-sm font-bold hover:brightness-110">{isSettingNewPasskey ? "Save & Login" : "Unlock"}</button>
                            </div>
                        )}

                        {/* Admin Panel */}
                        {isAdmin && adminPanelOpen && (
                            <div className="absolute bottom-16 right-0 bg-white p-0 rounded-2xl shadow-2xl border border-slate-200 w-80 overflow-hidden mb-2 animate-fade-in">
                                <div className="bg-slate-900 p-4 flex justify-between items-center text-white">
                                    <h3 className="font-bold flex items-center gap-2 text-sm"><ShieldCheck size={16} /> Admin Panel (EN)</h3>
                                    <button onClick={() => { setIsAdmin(false); setAdminPanelOpen(false); }} className="text-xs text-slate-400 hover:text-white flex items-center gap-1"><Unlock size={12} /> Logout</button>
                                </div>
                                <div className="p-4 space-y-4 max-h-[60vh] overflow-y-auto">
                                    <div className="flex justify-between items-center pb-2 border-b border-slate-100">
                                        <span className="text-xs font-bold text-slate-400 uppercase">Site Settings</span>
                                        <button onClick={resetSettings} className="flex items-center gap-1 text-[10px] bg-red-50 text-red-600 px-2 py-1 rounded hover:bg-red-100"><RotateCcw size={10} /> Reset</button>
                                    </div>
                                    <div className="bg-slate-50 p-2 rounded-lg mb-4 flex gap-2">
                                        <button onClick={() => { setCurrentPage('landing'); setAdminPanelOpen(false); }} className={`flex-1 py-2 text-xs font-bold rounded-lg flex items-center justify-center gap-1 ${currentPage === 'landing' ? 'bg-white shadow text-[var(--primary)]' : 'text-slate-500 hover:bg-white/50'}`}><Home size={14} /> Home</button>
                                        <button onClick={() => { setCurrentPage('thankyou'); setAdminPanelOpen(false); }} className={`flex-1 py-2 text-xs font-bold rounded-lg flex items-center justify-center gap-1 ${currentPage === 'thankyou' ? 'bg-white shadow text-[var(--primary)]' : 'text-slate-500 hover:bg-white/50'}`}><CheckCircle size={14} /> Thank You</button>
                                    </div>
                                    <button onClick={() => { setCurrentPage('admin-dashboard'); fetchLeads(); setAdminPanelOpen(false); }} className="w-full bg-[var(--primary)] text-white py-3 rounded-xl flex items-center justify-center gap-2 font-bold text-sm shadow-md hover:brightness-110 mb-4"><Users size={16} /> Manage Student Leads</button>
                                    
                                    <div><label className="text-xs font-bold text-slate-400">Primary Color</label><input type="color" value={settings.theme.primary} onChange={(e) => saveSettings({ ...settings, theme: { ...settings.theme, primary: e.target.value } })} className="w-full h-8 rounded cursor-pointer mt-1" /></div>
                                    <div><label className="text-xs font-bold text-slate-400">Accent Color</label><input type="color" value={settings.theme.accent} onChange={(e) => saveSettings({ ...settings, theme: { ...settings.theme, accent: e.target.value } })} className="w-full h-8 rounded cursor-pointer mt-1" /></div>
                                    <div><label className="text-xs font-bold text-slate-400">WhatsApp Link</label><input type="text" value={settings.socialLinks.whatsapp} onChange={(e) => saveSettings({ ...settings, socialLinks: { ...settings.socialLinks, whatsapp: e.target.value } })} className="w-full text-xs p-2 border rounded mt-1" /></div>
                                    <div><label className="text-xs font-bold text-slate-400">Telegram Link</label><input type="text" value={settings.socialLinks.telegram} onChange={(e) => saveSettings({ ...settings, socialLinks: { ...settings.socialLinks, telegram: e.target.value } })} className="w-full text-xs p-2 border rounded mt-1" /></div>
                                    <div><label className="text-xs font-bold text-slate-400">Instagram Link</label><input type="text" value={settings.socialLinks.instagram} onChange={(e) => saveSettings({ ...settings, socialLinks: { ...settings.socialLinks, instagram: e.target.value } })} className="w-full text-xs p-2 border rounded mt-1" /></div>
                                    <div><label className="text-xs font-bold text-slate-400">Facebook Link</label><input type="text" value={settings.socialLinks.facebook} onChange={(e) => saveSettings({ ...settings, socialLinks: { ...settings.socialLinks, facebook: e.target.value } })} className="w-full text-xs p-2 border rounded mt-1" /></div>
                                    <div><label className="text-xs font-bold text-slate-400">Video URL</label><input type="text" value={settings.videoConfig.src} onChange={(e) => saveSettings({ ...settings, videoConfig: { ...settings.videoConfig, src: e.target.value, type: 'url' } })} className="w-full text-xs p-2 border rounded mt-1" /></div>
                                </div>
                            </div>
                        )}
                    </div>

                    {currentPage === 'admin-dashboard' ? (
                        <div className="min-h-screen bg-slate-100">
                            {/* Header */}
                            <div className="bg-white border-b border-slate-200 sticky top-0 z-40">
                                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                                    <div className="flex justify-between items-center py-4">
                                        <div className="flex items-center gap-3">
                                            <div className="w-10 h-10 bg-[var(--primary)] rounded-xl flex items-center justify-center">
                                                <Users className="text-white" size={20} />
                                            </div>
                                            <div>
                                                <h1 className="text-xl font-bold text-slate-900">Student Registrations</h1>
                                                <p className="text-xs text-slate-500">English Landing Page Leads</p>
                                            </div>
                                        </div>
                                        <button onClick={() => setCurrentPage('landing')} className="px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-lg text-slate-700 font-medium flex items-center gap-2 text-sm transition-colors">
                                            <ArrowLeft size={16} /> Back to Site
                                        </button>
                                    </div>
                                </div>
                            </div>

                            {/* Stats & Actions */}
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                                <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                    <div className="bg-white rounded-2xl p-5 shadow-sm border border-slate-200">
                                        <div className="flex items-center justify-between">
                                            <div>
                                                <p className="text-xs font-medium text-slate-500 uppercase tracking-wide">Total Leads</p>
                                                <p className="text-3xl font-bold text-[var(--primary)] mt-1">{leads.length}</p>
                                            </div>
                                            <div className="w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center">
                                                <Users className="text-blue-600" size={24} />
                                            </div>
                                        </div>
                                    </div>
                                    <div className="bg-white rounded-2xl p-5 shadow-sm border border-slate-200">
                                        <div className="flex items-center justify-between">
                                            <div>
                                                <p className="text-xs font-medium text-slate-500 uppercase tracking-wide">Today</p>
                                                <p className="text-3xl font-bold text-green-600 mt-1">
                                                    {leads.filter(l => new Date(l.registeredAt).toDateString() === new Date().toDateString()).length}
                                                </p>
                                            </div>
                                            <div className="w-12 h-12 bg-green-50 rounded-xl flex items-center justify-center">
                                                <CheckCircle className="text-green-600" size={24} />
                                            </div>
                                        </div>
                                    </div>
                                    <div className="bg-white rounded-2xl p-5 shadow-sm border border-slate-200">
                                        <div className="flex items-center justify-between">
                                            <div>
                                                <p className="text-xs font-medium text-slate-500 uppercase tracking-wide">This Week</p>
                                                <p className="text-3xl font-bold text-orange-600 mt-1">
                                                    {leads.filter(l => {
                                                        const d = new Date(l.registeredAt);
                                                        const now = new Date();
                                                        const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                                                        return d >= weekAgo;
                                                    }).length}
                                                </p>
                                            </div>
                                            <div className="w-12 h-12 bg-orange-50 rounded-xl flex items-center justify-center">
                                                <Clock className="text-orange-600" size={24} />
                                            </div>
                                        </div>
                                    </div>
                                    <div className="bg-gradient-to-r from-[var(--primary)] to-slate-800 rounded-2xl p-5 shadow-sm">
                                        <button onClick={exportToCSV} className="w-full h-full flex flex-col items-center justify-center text-white hover:scale-105 transition-transform">
                                            <FileDown size={28} className="mb-2" />
                                            <span className="font-bold text-sm">Export CSV</span>
                                        </button>
                                    </div>
                                </div>

                                {/* Search Bar */}
                                <div className="bg-white rounded-2xl shadow-sm border border-slate-200 mb-6">
                                    <div className="p-4 border-b border-slate-100">
                                        <div className="relative">
                                            <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" size={18} />
                                            <input
                                                type="text"
                                                placeholder="Search by name, email, or phone..."
                                                value={searchTerm}
                                                onChange={(e) => setSearchTerm(e.target.value)}
                                                className="w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent transition-all"
                                            />
                                        </div>
                                    </div>

                                    {/* Table */}
                                    {isLoadingLeads ? (
                                        <div className="p-12 text-center">
                                            <div className="spinner mx-auto mb-4"></div>
                                            <p className="text-slate-500">Loading leads...</p>
                                        </div>
                                    ) : filteredLeads.length === 0 ? (
                                        <div className="p-12 text-center">
                                            <Users className="mx-auto mb-4 text-slate-300" size={48} />
                                            <p className="text-slate-500 font-medium">No leads found</p>
                                            <p className="text-slate-400 text-sm">Registrations will appear here</p>
                                        </div>
                                    ) : (
                                        <div className="overflow-x-auto">
                                            <table className="w-full">
                                                <thead>
                                                    <tr className="bg-slate-50 border-b border-slate-200">
                                                        <th className="text-left px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">#</th>
                                                        <th className="text-left px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Name</th>
                                                        <th className="text-left px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Email</th>
                                                        <th className="text-left px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Phone</th>
                                                        <th className="text-left px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Registered</th>
                                                        <th className="text-right px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Actions</th>
                                                    </tr>
                                                </thead>
                                                <tbody className="divide-y divide-slate-100">
                                                    {filteredLeads.map((lead, index) => (
                                                        <tr key={lead.id} className="hover:bg-slate-50 transition-colors">
                                                            <td className="px-6 py-4">
                                                                <span className="text-xs font-medium text-slate-400">{index + 1}</span>
                                                            </td>
                                                            <td className="px-6 py-4">
                                                                <div className="flex items-center gap-3">
                                                                    <div className="w-9 h-9 rounded-full bg-gradient-to-br from-[var(--primary)] to-[var(--accent)] flex items-center justify-center text-white font-bold text-sm">
                                                                        {lead.name?.charAt(0)?.toUpperCase() || '?'}
                                                                    </div>
                                                                    <span className="font-medium text-slate-900">{lead.name}</span>
                                                                </div>
                                                            </td>
                                                            <td className="px-6 py-4">
                                                                <span className="text-slate-600">{lead.email}</span>
                                                            </td>
                                                            <td className="px-6 py-4">
                                                                <span className="text-slate-600 font-mono text-sm">{lead.phone}</span>
                                                            </td>
                                                            <td className="px-6 py-4">
                                                                <div>
                                                                    <p className="text-sm text-slate-900">{new Date(lead.registeredAt).toLocaleDateString()}</p>
                                                                    <p className="text-xs text-slate-400">{new Date(lead.registeredAt).toLocaleTimeString()}</p>
                                                                </div>
                                                            </td>
                                                            <td className="px-6 py-4">
                                                                <div className="flex justify-end gap-2">
                                                                    <button onClick={() => handleEditLead(lead)} className="p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors" title="Edit">
                                                                        <Edit2 size={16} />
                                                                    </button>
                                                                    <button onClick={() => handleDeleteLead(lead.id)} className="p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors" title="Delete">
                                                                        <Trash2 size={16} />
                                                                    </button>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    ))}
                                                </tbody>
                                            </table>
                                        </div>
                                    )}

                                    {/* Footer */}
                                    {filteredLeads.length > 0 && (
                                        <div className="px-6 py-4 bg-slate-50 border-t border-slate-200 flex justify-between items-center">
                                            <p className="text-sm text-slate-500">
                                                Showing <span className="font-medium text-slate-900">{filteredLeads.length}</span> of <span className="font-medium text-slate-900">{leads.length}</span> leads
                                            </p>
                                            <button onClick={fetchLeads} className="text-sm text-[var(--accent)] hover:underline font-medium flex items-center gap-1">
                                                <RotateCcw size={14} /> Refresh
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    ) : currentPage === 'thankyou' ? (
                        <div className="min-h-screen py-12 px-6 flex flex-col items-center justify-center bg-[var(--primary)] text-white relative overflow-hidden animate-fade-in">
                            <div className="absolute top-[-10%] right-[-5%] w-[500px] h-[500px] bg-white/5 rounded-full blur-[100px] pointer-events-none"></div>
                            <div className="max-w-4xl w-full bg-white text-slate-900 rounded-3xl shadow-2xl overflow-hidden relative z-10">
                                <div className="bg-[var(--primary)] p-10 text-center relative overflow-hidden">
                                    <div className="absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"></div>
                                    <div className="w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl ring-4 ring-green-400/30 animate-bounce"><CheckCircle className="text-white" size={48} /></div>
                                    <h1 className="text-3xl md:text-4xl font-extrabold text-white mb-2">Registration Successful!</h1>
                                    <p className="text-blue-100 text-lg">Your seat for the webinar has been reserved.</p>
                                </div>
                                <div className="p-8 md:p-12">
                                    <div className="grid md:grid-cols-2 gap-12">
                                        <div className="flex flex-col justify-center"><h3 className="font-bold text-xl text-[var(--primary)] mb-4 flex items-center gap-2"><Video size={20} className="text-[var(--accent)]"/> Watch this first</h3><div className="aspect-video rounded-2xl overflow-hidden shadow-lg border border-slate-200"><CustomVideoPlayer videoSource={settings.videoConfig} /></div></div>
                                        <div className="flex flex-col justify-center"><h3 className="font-bold text-xl text-[var(--primary)] mb-6">Next Steps:</h3><div className="space-y-6">
                                            <div className="flex gap-4"><div className="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold shrink-0">1</div><div><p className="font-medium text-slate-800">Join the WhatsApp Group</p><a href={settings.socialLinks.whatsapp} target="_blank" className="inline-flex items-center gap-2 bg-[#25D366] text-white px-4 py-2 rounded-lg font-bold hover:brightness-110 shadow-md shadow-green-200 mt-2" aria-label="Join WhatsApp"><MessageCircle size={18} /> Join Group</a></div></div>
                                            <div className="flex gap-4"><div className="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold shrink-0">2</div><div><p className="font-medium text-slate-800">Follow us for Updates</p><div className="flex gap-2 mt-2"><a href={settings.socialLinks.instagram} target="_blank" className="p-2 bg-gradient-to-r from-[#833ab4] via-[#fd1d1d] to-[#fcb045] text-white rounded-lg hover:opacity-90 shadow-sm" aria-label="Instagram"><Instagram size={20} /></a><a href={settings.socialLinks.facebook} target="_blank" className="p-2 bg-[#1877F2] text-white rounded-lg hover:brightness-110 shadow-sm" aria-label="Facebook"><Facebook size={20} /></a><a href={settings.socialLinks.telegram} target="_blank" className="p-2 bg-[#0088cc] text-white rounded-lg hover:brightness-110 shadow-sm" aria-label="Telegram"><Send size={20} /></a></div></div></div>
                                        </div></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    ) : (
                        <div>
                            <section className="relative pt-24 pb-32 px-6 md:px-12 bg-[var(--primary)] text-white overflow-hidden transition-colors duration-500">
                                <div className="absolute top-[-10%] right-[-5%] w-[500px] h-[500px] bg-blue-500/10 rounded-full blur-[100px] pointer-events-none"></div>
                                <div className="max-w-5xl mx-auto text-center relative z-10">
                                    <div className="flex justify-center mb-8"><div className="inline-flex items-center px-4 py-1.5 rounded-full bg-slate-900/50 border border-[var(--accent)]/30 shadow-lg backdrop-blur-sm"><span className="text-[var(--accent)] font-extrabold uppercase tracking-widest text-xs sm:text-sm animate-pulse">Exclusive Webinar Event</span></div></div>
                                    <h1 className="text-4xl md:text-6xl lg:text-7xl font-extrabold tracking-tight mb-8 leading-[1.1]">Conquer the Fear of the <br className="hidden md:block" /><span className="text-transparent bg-clip-text bg-gradient-to-r from-[var(--accent)] to-orange-400">New Descriptive Pattern</span></h1>
                                    <p className="text-lg md:text-2xl text-slate-300 mb-12 max-w-3xl mx-auto font-light leading-relaxed">Master the exact <span className="text-white font-semibold border-b border-[var(--accent)]">Framework Method</span> used by 350+ Officers to crack MPSC/UPSC.</p>
                                    <div className="flex flex-col sm:flex-row gap-5 justify-center items-center"><button onClick={() => document.getElementById('reg-form')?.scrollIntoView({ behavior: 'smooth' })} className="w-full sm:w-auto px-10 py-5 bg-[var(--accent)] hover:brightness-110 text-white font-bold rounded-xl text-lg shadow-xl shadow-orange-900/20 transition-all transform hover:-translate-y-1 flex items-center justify-center gap-2">Secure Your Spot Free <ChevronRight size={20} /></button></div>
                                </div>
                            </section>

                            <section className="py-24 px-6 bg-white relative z-20 -mt-10 rounded-t-[40px]">
                                <div className="max-w-6xl mx-auto"><div className="text-center mb-16"><h2 className="text-3xl md:text-4xl font-bold text-[var(--primary)] mb-4">Why This MPSC/UPSC Webinar is Mandatory</h2><div className="w-24 h-1.5 bg-[var(--accent)] mx-auto rounded-full"></div></div>
                                <div className="grid md:grid-cols-3 gap-8">
                                    {[ { icon: <BookOpen className="text-[var(--accent)]" size={32} />, title: "Decoding the Syllabus", desc: "Understand exactly what the MPSC/UPSC Commission expects in 2025." }, { icon: <Clock className="text-[var(--accent)]" size={32} />, title: "Time-Blocking Strategy", desc: "Scientific routine management for working professionals and students." }, { icon: <Award className="text-[var(--accent)]" size={32} />, title: "The Framework Method", desc: "Draft high-scoring descriptive answers in under 8 minutes." } ].map((item, i) => (<div key={i} className="p-8 rounded-2xl bg-slate-50 hover:shadow-xl transition-all border border-slate-100 hover:border-[var(--accent)]"><div className="w-16 h-16 bg-white rounded-2xl flex items-center justify-center mb-6 shadow-sm">{item.icon}</div><h3 className="text-xl font-bold text-[var(--primary)] mb-3">{item.title}</h3><p className="text-slate-600">{item.desc}</p></div>))}
                                </div></div>
                            </section>

                            <section className="py-24 px-6 bg-[var(--primary)] text-white">
                                <div className="max-w-6xl mx-auto"><div className="text-center mb-16"><h2 className="text-3xl md:text-4xl font-bold mb-4 text-white">Webinar Agenda & Syllabus Breakdown</h2><p className="text-slate-300 text-lg">What will you learn in this FREE UPSC/MPSC Webinar?</p><div className="w-24 h-1.5 bg-[var(--accent)] mx-auto rounded-full mt-4"></div></div>
                                <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                                    {[ { id: 1, text: "What is UPSC/MPSC? A detailed analysis for beginners." }, { id: 2, text: "Posts under UPSC/MPSC â€“ Eligibility and qualifications required." }, { id: 3, text: "Can UPSC CSE & MPSC Rajyaseva be prepared together?" }, { id: 4, text: "How many months of study are required to crack UPSC/MPSC?" }, { id: 5, text: "Complete analysis of UPSC/MPSC syllabus 2025." }, { id: 6, text: "Common obstacles faced at the beginning of preparation & their solutions." }, { id: 7, text: "Comprehensive subject-wise strategy for beginners." }, { id: 8, text: "Which books to start with for MPSC Combine & subject focus areas." } ].map((item) => (<div key={item.id} className="bg-white/10 backdrop-blur-md border border-white/10 p-6 rounded-2xl hover:bg-white/20 transition-all group"><div className="w-10 h-10 rounded-full bg-[var(--accent)] text-[var(--primary)] font-bold flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">{item.id}</div><p className="font-medium text-slate-100 leading-relaxed">{item.text}</p></div>))}
                                </div></div>
                            </section>

                            <section className="py-24 px-6 bg-slate-900 text-white border-t border-slate-800">
                                <div className="max-w-6xl mx-auto"><div className="text-center mb-16"><h2 className="text-3xl md:text-4xl font-bold mb-4">The 5 Secrets of Success for Competitive Exams</h2><div className="w-24 h-1.5 bg-[var(--accent)] mx-auto rounded-full"></div></div>
                                <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                                    {[ {icon: <Zap size={32} />, title: "Secret 1", desc: "UPSC/MPSC doesn't need subject experts; it needs great administrators."}, {icon: <Scale size={32} />, title: "Secret 2", desc: "Balance between conceptual clarity & memorisation is the key."}, {icon: <Target size={32} />, title: "Secret 3", desc: "Minimum Material, Maximum Revision is the real success mantra."}, {icon: <FileText size={32} />, title: "Secret 4", desc: "Previous year papers are a must to understand the exam."}, {icon: <Brain size={32} />, title: "Secret 5", desc: "Focus on conceptual learning, not just finishing books."} ].map((secret, i) => (<div key={i} className={`bg-slate-800 p-8 rounded-2xl border-l-4 border-[var(--accent)] hover:translate-y-[-5px] transition-transform ${i>=3 ? 'md:col-span-1 lg:col-span-1.5' : ''}`}><div className="mb-4 text-[var(--accent)]">{secret.icon}</div><h3 className="text-xl font-bold mb-2">{secret.title}</h3><p className="text-slate-300">{secret.desc}</p></div>))}
                                </div></div>
                            </section>

                            <section className="py-24 px-6 bg-white">
                                <div className="max-w-5xl mx-auto"><div className="bg-[var(--primary)] rounded-[2.5rem] overflow-hidden shadow-2xl text-white border border-slate-800 transition-colors duration-300"><div className="flex flex-col md:flex-row"><div className="md:w-5/12 bg-slate-900 relative min-h-[450px] group overflow-hidden"><img src="https://res-console.cloudinary.com/dkkkjtoa9/thumbnails/v1/image/upload/v1765787346/aW1hZ2U2NTU1X21oNnYyeg==/drilldown" alt="Dr. Vishal Bhedurkar" className="absolute inset-0 w-full h-full object-cover object-top opacity-90 transition-transform duration-700" width="500" height="600" loading="lazy" onError={(e) => { e.target.src = "https://images.unsplash.com/photo-1560250097-0b93528c311a?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" }} /><div className="absolute inset-0 bg-gradient-to-t from-[var(--primary)] via-transparent to-transparent opacity-90"></div><div className="absolute bottom-6 left-6 right-6"><div className="bg-white/10 backdrop-blur-md border border-white/20 p-4 rounded-xl"><p className="font-serif italic text-blue-100 text-sm">"Success isn't about reading more. It's about thinking clearly."</p></div></div></div><div className="md:w-7/12 p-8 md:p-14 flex flex-col justify-center"><h3 className="text-[var(--accent)] font-bold tracking-widest uppercase text-xs mb-3">Your Mentor</h3><h2 className="text-3xl md:text-4xl font-bold mb-6 font-serif">Dr. Vishal Bhedurkar</h2><p className="text-slate-400 mb-10 leading-relaxed text-lg">Founder & Director of Dnyanjyoti Education. With a heart for students and a mind for strategy, Dr. Vishal has transformed the lives of thousands of aspirants in Pune through precision mentorship.</p><div className="grid grid-cols-2 gap-y-8 gap-x-4"><div><h4 className="text-4xl font-extrabold text-white">12+</h4><p className="text-sm text-slate-500 uppercase tracking-wide mt-1">Years Experience</p></div><div><h4 className="text-4xl font-extrabold text-white">1000+</h4><p className="text-sm text-slate-500 uppercase tracking-wide mt-1">Officers Guided</p></div><div><h4 className="text-4xl font-extrabold text-white">350+</h4><p className="text-sm text-slate-500 uppercase tracking-wide mt-1">Final Selections</p></div><div><h4 className="text-4xl font-extrabold text-white">4</h4><p className="text-sm text-slate-500 uppercase tracking-wide mt-1">Centers in Pune</p></div><div className="col-span-2"><h4 className="text-4xl font-extrabold text-white">1 Lakh+</h4><p className="text-sm text-slate-500 uppercase tracking-wide mt-1">Students Attended Webinar</p></div></div></div></div></div></div>
                            </section>

                            <section className="py-24 px-6 bg-slate-50">
                                <div className="max-w-6xl mx-auto grid md:grid-cols-2 gap-12">
                                    <div className="bg-white p-8 rounded-3xl shadow-xl border border-slate-100"><div className="flex items-center gap-4 mb-6"><div className="w-12 h-12 rounded-full bg-blue-100 text-[var(--primary)] flex items-center justify-center"><Star size={24} /></div><h3 className="text-2xl font-bold text-[var(--primary)]">Why Should You Register?</h3></div><ul className="space-y-4">{["Get clarity on the changing exam pattern and stay ahead of the competition.", "Learn time-tested strategies directly from expert mentors.", "Avoid common pitfalls that 90% of aspirants make in their first year.", "Understand how to balance prelims and mains preparation effectively."].map((item, i) => (<li key={i} className="flex gap-3 text-slate-700"><CheckCircle size={20} className="text-[var(--accent)] shrink-0 mt-1" /><span>{item}</span></li>))}</ul></div>
                                    <div className="bg-white p-8 rounded-3xl shadow-xl border border-slate-100"><div className="flex items-center gap-4 mb-6"><div className="w-12 h-12 rounded-full bg-green-100 text-green-700 flex items-center justify-center"><Download size={24} /></div><h3 className="text-2xl font-bold text-[var(--primary)]">What Will You Get?</h3></div><ul className="space-y-4">{["Exclusive access to the live webinar session.", "A comprehensive PDF guide on the new descriptive pattern.", "Direct Q&A opportunity with Dr. Vishal Bhedurkar.", "Priority access to upcoming foundation batches."].map((item, i) => (<li key={i} className="flex gap-3 text-slate-700"><CheckCircle size={20} className="text-green-600 shrink-0 mt-1" /><span>{item}</span></li>))}</ul></div>
                                </div>
                            </section>

                            <section id="reg-form" className="py-24 px-6 bg-[var(--bg-body)]">
                                <div className="max-w-xl mx-auto bg-white rounded-3xl shadow-2xl p-8 md:p-12 relative overflow-hidden border border-slate-100">
                                    <div className="absolute top-0 left-0 w-full h-2 bg-[var(--accent)]"></div>
                                    <div className="text-center mb-8"><h2 className="text-3xl font-bold text-[var(--primary)]">Secure Your Seat</h2><p className="text-slate-500 mt-2">Unlock the pre-webinar study PDF immediately.</p></div>
                                    <form onSubmit={handleRegister} className="space-y-5">
                                        <input required name="fullName" placeholder="Full Name" className="w-full px-4 py-4 rounded-xl bg-slate-50 border border-slate-200 focus:border-[var(--accent)] outline-none transition-colors" />
                                        <input required name="email" type="email" placeholder="Email Address" className="w-full px-4 py-4 rounded-xl bg-slate-50 border border-slate-200 focus:border-[var(--accent)] outline-none transition-colors" />
                                        <input required name="phone" type="tel" placeholder="Phone Number" className="w-full px-4 py-4 rounded-xl bg-slate-50 border border-slate-200 focus:border-[var(--accent)] outline-none transition-colors" />
                                        <button disabled={isSubmitting} type="submit" className="w-full py-5 bg-[var(--primary)] text-white font-bold rounded-xl text-lg hover:brightness-110 transition-all flex items-center justify-center gap-2">{isSubmitting ? 'Registering...' : <span>Register & Unlock PDF <ChevronRight size={20} className="inline"/></span>}</button>
                                        <div className="mt-6 p-4 bg-orange-50 border border-orange-100 rounded-xl text-center"><p className="text-sm font-bold text-slate-800 flex items-center justify-center gap-2"><span className="text-xl">ðŸ‘‰</span> By registering, you get a chance to attend this <span className="text-[var(--primary)] underline decoration-[var(--accent)] decoration-2">â‚¹3999/- value Webinar</span> absolutely FREE!</p></div>
                                        <p className="text-center text-xs text-slate-400 mt-2">Limited spots available for serious aspirants.</p>
                                    </form>
                                </div>
                            </section>
                        </div>
                    )}
                </div>
            );
        };

        function renderReactApp(isOffline = false) {
            const root = createRoot(document.getElementById('root'));
            root.render(<App isOffline={isOffline} />);
        }

        initApp();

        window.onerror = function(message, source, lineno, colno, error) {
            document.getElementById('root').style.display = 'none';
            const errContainer = document.getElementById('error-container');
            errContainer.style.display = 'block';
            document.getElementById('error-message').innerText = message + " (Line: " + lineno + ")";
        };
    </script>
</body>
</html>
